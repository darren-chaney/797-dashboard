/* ============================================================
   Mash Builder â€” Layout + UI
   Stable, compact, readable
   ============================================================ */

:root{
  --bg:#0f172a;
  --panel:#111c33;
  --border:#334155;
  --text:#e5e7eb;
  --muted:#9ca3af;
  --accent:#38bdf8;
  --good:#22c55e;
  --warn:#f59e0b;
}

/* ---------- GLOBAL ---------- */

*,
*::before,
*::after{
  box-sizing:border-box;
}

html, body{
  margin:0;
  padding:0;
  background:var(--bg);
  color:var(--text);
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
}

body{
  min-height:100vh;
}

main{
  max-width:1100px;
  margin:0 auto;
  padding:28px 20px 40px;
}

/* ---------- HEADERS ---------- */

h1{
  font-size:1.6rem;
  margin:0 0 4px;
}

.subtitle{
  color:var(--muted);
  font-size:0.95rem;
  margin-bottom:10px;
}

#engineStamp{
  font-size:0.8rem;
  color:var(--muted);
  margin-bottom:16px;
}

/* ---------- PANELS ---------- */

.panel{
  background:var(--panel);
  border:1px solid var(--border);
  border-radius:12px;
  padding:18px 20px;
  margin-bottom:18px;

  /* CRITICAL: prevent flex/grid height explosions */
  min-height:0;
}

.panel h2{
  font-size:1.05rem;
  margin:0 0 14px;
}

/* ---------- GRID / ROWS ---------- */

.grid{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:16px;
  min-height:0; /* critical */
}

@media (max-width:900px){
  .grid{
    grid-template-columns:1fr;
  }
}

.row{
  display:flex;
  align-items:center;
  gap:10px;
  margin-bottom:8px;
  min-height:0;
}

.row label{
  flex:0 0 200px;
  font-size:0.9rem;
  color:var(--text);
}

.row input,
.row select{
  flex:1;
  min-width:0;
}

/* ---------- FORM CONTROLS ---------- */

input,
select,
button{
  background:#0b1223;
  color:var(--text);
  border:1px solid var(--border);
  border-radius:8px;
  padding:7px 10px;
  font-size:0.9rem;
}

input:focus,
select:focus{
  outline:none;
  border-color:var(--accent);
}

input[type="checkbox"]{
  width:auto;
  transform:scale(1.05);
}

button{
  cursor:pointer;
  padding:8px 14px;
}

button.primary{
  border-color:var(--accent);
  color:var(--accent);
}

button.secondary{
  border-color:var(--border);
  color:var(--text);
}

/* ---------- HELPER / EXPLANATORY TEXT ---------- */

.small,
.helper-text,
.hint{
  font-size:0.85rem;
  color:var(--muted);
  line-height:1.3;
  max-width:420px; /* KEY FIX */
  white-space:normal;
}

.long-label{
  display:block;
  font-size:0.85rem;
  color:var(--muted);
  max-width:420px;
  line-height:1.3;
  margin-top:4px;
}

/* ---------- KEY / VALUE BLOCKS ---------- */

.kv{
  display:flex;
  justify-content:space-between;
  gap:12px;
  margin-bottom:6px;
  min-height:0;
}

.kv .k{
  color:var(--muted);
  font-size:0.85rem;
}

.kv .v{
  font-size:0.9rem;
  text-align:right;
}

/* ---------- BADGES ---------- */

.badge{
  display:inline-block;
  font-size:0.7rem;
  padding:2px 6px;
  border-radius:6px;
  border:1px solid var(--border);
  color:var(--muted);
  margin-left:6px;
}

/* ---------- SCENARIO TOOLS ---------- */

.scenario-tools{
  display:flex;
  gap:10px;
  flex-wrap:wrap;
  margin-top:10px;
  min-height:0;
}

.scenario-tools input{
  max-width:260px;
}

/* ---------- RULES BLOCK ---------- */

#ruleBlock{
  margin-top:8px;
}

#ruleNotes{
  font-size:0.85rem;
  color:var(--muted);
  line-height:1.35;
}

/* ---------- STATUS / ERRORS ---------- */

#scenarioStatus{
  font-size:0.85rem;
  color:var(--good);
  margin-top:6px;
}

#fatalError{
  display:none;
  white-space:pre-wrap;
  background:#3b0f1e;
  border:1px solid #7f1d1d;
  color:#fecaca;
  padding:12px;
  border-radius:8px;
  font-size:0.85rem;
  margin-bottom:16px;
}

/* ---------- FOOTER SPACING SAFETY ---------- */

.panel:last-child{
  margin-bottom:0;
}
