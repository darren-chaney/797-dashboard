<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>797 Distillery — Mash Builder</title>

  <link rel="stylesheet" href="header.css?v=1.0.0" />
  <link rel="stylesheet" href="mash.css?v=2.0.0" />
</head>
<body>

<div id="global-header"></div>

<script>
  const PAGE_TITLE = "Mash Builder";
  const PAGE_SUBTITLE = "Batch planning and yield projection";
  fetch("header.html?v=1.0.0")
    .then(r => r.text())
    .then(html => document.getElementById("global-header").innerHTML = html);
</script>

<main class="mash-container">

  <div class="topbar">
    <div>
      <h1>Mash Builder</h1>
      <div class="sub">Modular batch planning & yield projection</div>
    </div>
    <div class="engine-stamp" id="engineStamp">ENGINE VERSION: —</div>
  </div>

  <!-- MODULE: SETUP -->
  <section class="module">
    <h2>1. Batch Setup</h2>
    <div class="grid">
      <div>
        <label>Mash Type</label>
        <select id="mashSelect"></select>
      </div>
      <div>
        <label>Fill Volume (gal)</label>
        <input id="fillGal" type="number" step="0.5" />
      </div>
      <div>
        <label>Target Wash ABV (%)</label>
        <input id="targetAbv" type="number" step="0.1" />
        <div class="hint" id="targetHint"></div>
      </div>
    </div>
  </section>

  <!-- MODULE: FERMENTABLES -->
  <section class="module">
    <h2>2. Fermentables</h2>
    <div id="ingredients" class="block"></div>
  </section>

  <!-- MODULE: FERMENTATION -->
  <section class="module">
    <h2>3. Fermentation Targets</h2>
    <div class="grid">
      <div>
        <label>Yeast (g)</label>
        <div id="yeastBlock" class="readonly"></div>
      </div>
      <div>
        <label>Nutrients (g)</label>
        <div id="nutrientBlock" class="readonly"></div>
      </div>
      <div>
        <label>Target pH</label>
        <div id="phBlock" class="readonly"></div>
      </div>
    </div>
  </section>

  <!-- MODULE: STRIPPING -->
  <section class="module">
    <h2>4. Stripping Run</h2>
    <div class="grid">
      <div>
        <label>Still</label>
        <select id="stillSelect"></select>
      </div>
      <div>
        <label>Charge Fill (%)</label>
        <input id="chargeFillPct" type="number" step="1" />
      </div>
      <div>
        <label>Low Wines Avg %</label>
        <input id="stripProof" type="number" step="0.5" />
      </div>
    </div>
  </section>

  <!-- MODULE: RESULTS -->
  <section class="module results">
    <h2>5. Results</h2>
    <div id="washBlock"></div>
    <div id="stripBlock"></div>
  </section>

  <div class="actions">
    <button id="btnRecalc" class="btn">Recalculate</button>
  </div>

  <div id="fatalError" class="fatal" style="display:none"></div>

</main>

<script src="mash-definitions.js?v=1.0.0"></script>
<script src="mash-engine.js?v=1.0.0"></script>
<script src="mash-ui.js?v=1.0.0"></script>

</body>
</html>
