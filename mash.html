<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>797 Distillery — Mash Builder</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Shared header -->
  <link rel="stylesheet" href="header.css">
  <link rel="stylesheet" href="mash.css">
</head>
<body>

<div id="global-header"></div>

<script>
fetch("header.html")
  .then(r => r.text())
  .then(html => document.getElementById("global-header").innerHTML = html);
</script>

<main>

  <h1>Mash Builder</h1>
  <div class="subtitle">Moonshine + Rum — built for your 55 / 235 tanks and 53 / 150 stills.</div>

  <!-- ALWAYS VISIBLE (even if JS fails) -->
  <div id="engineStamp">ENGINE VERSION: (loading…)</div>

  <div id="fatalError"></div>

  <!-- SETUP -->
  <div class="panel">
    <h2>Setup</h2>

    <div class="row">
      <label>Mash Type</label>
      <select id="mashSelect"></select>
    </div>

    <div class="row">
      <label>Tank (working fill)</label>
      <select id="tankSelect"></select>
    </div>

    <div class="row">
      <label>Fill Volume (gal)</label>
      <input id="fillGal" type="number">
    </div>

    <div class="row">
      <label>Target Wash ABV (%)</label>
      <input id="targetAbv" type="number" step="0.1">
    </div>

    <div class="row">
      <label>Stripping Still</label>
      <select id="stillSelect"></select>
    </div>

    <div class="row">
      <label>Low Wines Avg (strip) %ABV</label>
      <input id="stripProof" type="number" step="1">
    </div>

    <div class="row">
      <label>Charge Fill % of still</label>
      <input id="chargeFillPct" type="number" step="1">
    </div>

    <!-- Checkbox (fixed row class) -->
    <div class="row checkbox-row">
      <input type="checkbox" id="rumAdjustMode">
      <label for="rumAdjustMode">
        Adjust rum L350 gallons to hit Target ABV (dedicated mode)
      </label>
    </div>

    <div class="row buttons">
      <button id="btnRecalc">Recalculate</button>
      <button id="btnReset">Reset</button>
    </div>
  </div>

  <!-- RESULTS -->
  <div class="panel">
    <h2>Results</h2>

    <div id="baselineBlock"></div>
    <div id="scenarioBlock"></div>
    <div id="stripBlock"></div>

    <div id="ruleBlock">
      <h3>Rule Notes</h3>
      <div id="ruleNotes"></div>
    </div>
  </div>

</main>

<!-- Scripts -->
<script src="mash-definitions.js"></script>
<script src="mash-rules.js"></script>
<script src="mash-engine.js"></script>
<script src="mash-storage.js"></script>
<script src="mash-ui.js"></script>

</body>
</html>
